<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:XerahS.Mobile.UI.ViewModels"
             x:Class="XerahS.Mobile.UI.Views.MobileUploadView"
             x:DataType="vm:MobileUploadViewModel">

    <ScrollViewer>
        <StackPanel Margin="20" Spacing="16">

            <!-- Header -->
            <TextBlock Text="XerahS"
                       FontSize="28"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Margin="0,20,0,0" />

            <TextBlock Text="Share &amp; Upload"
                       FontSize="16"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,10" />

            <!-- Status -->
            <TextBlock Text="{Binding StatusText}"
                       HorizontalAlignment="Center"
                       TextWrapping="Wrap"
                       TextAlignment="Center" />

            <!-- Progress -->
            <ProgressBar IsIndeterminate="True"
                         IsVisible="{Binding IsUploading}"
                         Margin="0,8" />

            <!-- Results list -->
            <ItemsControl ItemsSource="{Binding Results}"
                          Margin="0,8">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:UploadResultItem">
                        <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                                CornerRadius="8"
                                Padding="16"
                                Margin="0,4">
                            <StackPanel Spacing="8">

                                <!-- File name -->
                                <TextBlock Text="{Binding FileName}"
                                           FontWeight="SemiBold" />

                                <!-- URL (if success) -->
                                <TextBlock Text="{Binding Url}"
                                           IsVisible="{Binding HasUrl}"
                                           Foreground="{DynamicResource SystemAccentColor}"
                                           TextWrapping="Wrap" />

                                <!-- Error (if failed) -->
                                <TextBlock Text="{Binding Error}"
                                           IsVisible="{Binding Error, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                           Foreground="Red"
                                           TextWrapping="Wrap" />

                                <!-- Copy URL button -->
                                <Button Content="Copy URL"
                                        IsVisible="{Binding HasUrl}"
                                        Command="{Binding $parent[ItemsControl].((vm:MobileUploadViewModel)DataContext).CopyUrlCommand}"
                                        CommandParameter="{Binding Url}"
                                        HorizontalAlignment="Left" />

                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

        </StackPanel>
    </ScrollViewer>

</UserControl>
