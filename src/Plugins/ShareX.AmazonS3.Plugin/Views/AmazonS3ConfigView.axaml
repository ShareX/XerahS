<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ShareX.AmazonS3.Plugin.ViewModels"
             x:Class="ShareX.AmazonS3.Plugin.Views.AmazonS3ConfigView"
             x:DataType="vm:AmazonS3ConfigViewModel">
    
    <StackPanel Spacing="15">
        <TextBlock Text="Amazon S3 Configuration" 
                   FontSize="18" 
                   FontWeight="SemiBold"
                   Margin="0,0,0,10"/>

        <!-- Access Key ID -->
        <StackPanel Spacing="5">
            <TextBlock Text="Access Key ID *" FontWeight="Medium"/>
            <TextBox Text="{Binding AccessKeyId, UpdateSourceTrigger=PropertyChanged}" 
                     Watermark="Enter AWS Access Key ID"
                     Width="400"
                     HorizontalAlignment="Left"/>
        </StackPanel>

        <!-- Secret Access Key -->
        <StackPanel Spacing="5">
            <TextBlock Text="Secret Access Key *" FontWeight="Medium"/>
            <TextBox Text="{Binding SecretAccessKey, UpdateSourceTrigger=PropertyChanged}" 
                     Watermark="Enter AWS Secret Access Key"
                     PasswordChar="â—"
                     Width="400"
                     HorizontalAlignment="Left"/>
        </StackPanel>

        <!-- Bucket Name -->
        <StackPanel Spacing="5">
            <TextBlock Text="Bucket Name *" FontWeight="Medium"/>
            <TextBox Text="{Binding BucketName, UpdateSourceTrigger=PropertyChanged}" 
                     Watermark="my-bucket-name"
                     Width="300"
                     HorizontalAlignment="Left"/>
        </StackPanel>

        <!-- Region / Endpoint -->
        <StackPanel Spacing="5">
            <TextBlock Text="Endpoint / Region *" FontWeight="Medium"/>
            <ComboBox ItemsSource="{Binding Endpoints}"
                      SelectedIndex="{Binding RegionIndex}"
                      Width="350"
                      HorizontalAlignment="Left">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="5">
                            <TextBlock Text="{Binding Name}"/>
                            <TextBlock Text="{Binding Endpoint, StringFormat='({0})'}" 
                                       FontSize="10" 
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </StackPanel>

        <!-- Object Prefix -->
        <StackPanel Spacing="5">
            <TextBlock Text="Object Prefix (Optional)" FontWeight="Medium"/>
            <TextBox Text="{Binding ObjectPrefix, UpdateSourceTrigger=PropertyChanged}" 
                     Watermark="uploads/"
                     Width="300"
                     HorizontalAlignment="Left"/>
            <TextBlock Text="Example: 'uploads/%y/%mo/' will save files as uploads/2026/01/filename.png" 
                       FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                       TextWrapping="Wrap"
                       MaxWidth="400"
                       HorizontalAlignment="Left"/>
        </StackPanel>

        <!-- Custom Domain -->
        <StackPanel Spacing="5">
            <TextBlock Text="Custom Domain (Optional)" FontWeight="Medium"/>
            <CheckBox Content="Use custom domain (CNAME)"
                      IsChecked="{Binding UseCustomCNAME}"/>
            <TextBox Text="{Binding CustomDomain, UpdateSourceTrigger=PropertyChanged}" 
                     Watermark="https://cdn.example.com"
                     Width="400"
                     HorizontalAlignment="Left"
                     IsEnabled="{Binding UseCustomCNAME}"/>
            <TextBlock Text="Use custom domain instead of S3 URL for uploaded files" 
                       FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
        </StackPanel>

        <!-- Storage Class -->
        <StackPanel Spacing="5">
            <TextBlock Text="Storage Class" FontWeight="Medium"/>
            <ComboBox SelectedIndex="{Binding StorageClassIndex}"
                      Width="200"
                      HorizontalAlignment="Left">
                <ComboBoxItem Content="STANDARD"/>
                <ComboBoxItem Content="REDUCED_REDUNDANCY"/>
                <ComboBoxItem Content="STANDARD_IA"/>
                <ComboBoxItem Content="ONEZONE_IA"/>
                <ComboBoxItem Content="INTELLIGENT_TIERING"/>
            </ComboBox>
        </StackPanel>

        <StackPanel Spacing="5">
            <!-- Set Public ACL -->
            <CheckBox Content="Make uploads public (public-read ACL)"
                      IsChecked="{Binding SetPublicACL}"/>

            <!-- Signed Payload -->
            <CheckBox Content="Signed payload" IsChecked="{Binding SignedPayload}" Margin="0,5,0,0" />
                
            <TextBlock Text="Remove extension:" FontWeight="Bold" Margin="0,15,0,5" />
            <StackPanel Orientation="Horizontal" Spacing="20">
                <CheckBox Content="Image" IsChecked="{Binding RemoveExtensionImage}" />
                <CheckBox Content="Video" IsChecked="{Binding RemoveExtensionVideo}" />
                <CheckBox Content="Text" IsChecked="{Binding RemoveExtensionText}" />
            </StackPanel>
        </StackPanel>

        <!-- Status Message -->
        <Border Background="{DynamicResource SystemFillColorAttentionBackground}"
                Padding="10"
                CornerRadius="4"
                IsVisible="{Binding !!StatusMessage}">
            <TextBlock Text="{Binding StatusMessage}"
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource SystemFillColorAttention}"/>
        </Border>
    </StackPanel>
</UserControl>
