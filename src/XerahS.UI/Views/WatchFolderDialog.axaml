<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:vm="using:XerahS.UI.ViewModels"
        mc:Ignorable="d"
        x:Class="XerahS.UI.Views.WatchFolderDialog"
        x:DataType="vm:WatchFolderEditViewModel"
        Width="520"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        Title="{Binding Title}">

    <Design.DataContext>
        <vm:WatchFolderEditViewModel />
    </Design.DataContext>

    <StackPanel Margin="20" Spacing="14">
        <TextBlock Text="{Binding Title}" FontSize="20" FontWeight="SemiBold"/>

        <StackPanel Spacing="6">
            <TextBlock Text="Folder path" FontWeight="SemiBold"/>
            <Grid ColumnDefinitions="*,Auto">
                <TextBox Grid.Column="0"
                         Text="{Binding FolderPath, UpdateSourceTrigger=PropertyChanged}"
                         Watermark="C:\Path\To\Folder"/>
                <Button Grid.Column="1"
                        Content="Browse..."
                        Command="{Binding BrowseFolderCommand}"
                        Margin="8,0,0,0"/>
            </Grid>
            <TextBlock Text="{Binding FolderPathError}"
                       Foreground="Tomato"
                       FontSize="12"
                       IsVisible="{Binding HasFolderPathError}"/>
        </StackPanel>

        <StackPanel Spacing="6">
            <TextBlock Text="Filter pattern" FontWeight="SemiBold"/>
            <TextBox Text="{Binding Filter, UpdateSourceTrigger=PropertyChanged}"
                     Watermark="*.png;*.jpg"/>
            <TextBlock Text="Separate multiple patterns with ';' (example: *.png;*.jpg)."
                       FontSize="11"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <TextBlock Text="{Binding FilterError}"
                       Foreground="Tomato"
                       FontSize="12"
                       IsVisible="{Binding HasFilterError}"/>
        </StackPanel>

        <StackPanel Spacing="6">
            <CheckBox IsChecked="{Binding IncludeSubdirectories}" Content="Include subfolders"/>
            <CheckBox IsChecked="{Binding MoveFilesToScreenshotsFolder}" Content="Move files to screenshots folder after processing"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
            <Button Content="Cancel" Command="{Binding CancelCommand}"/>
            <Button Content="Save" Command="{Binding SaveCommand}" IsEnabled="{Binding CanSave}"/>
        </StackPanel>
    </StackPanel>
</Window>
