<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:XerahS.UI.ViewModels"
        mc:Ignorable="d"
        x:Class="XerahS.UI.Views.AfterCaptureWindow"
        x:DataType="vm:AfterCaptureViewModel"
        Title="After Capture Tasks"
        Icon="/Assets/Logo.ico"
        Width="900" Height="600"
        WindowStartupLocation="CenterOwner">

  <Design.DataContext>
    <vm:AfterCaptureViewModel/>
  </Design.DataContext>

  <Grid ColumnDefinitions="2*, 24, *" RowDefinitions="*, 24, Auto" Margin="24">
    
    <!-- Preview Section -->
    <Border Grid.Column="0" Grid.Row="0"
            BorderThickness="1"
            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="4"
            Padding="16">
      <ScrollViewer>
        <Image Source="{Binding PreviewImage}"
               Stretch="Uniform"
               AutomationProperties.Name="Capture Preview"/>
      </ScrollViewer>
    </Border>

    <!-- Settings Section -->
    <ScrollViewer Grid.Column="2" Grid.Row="0">
      <StackPanel Spacing="24">
        
        <!-- After Capture Tasks -->
        <StackPanel Spacing="8">
          <TextBlock Text="After Capture" FontWeight="SemiBold" FontSize="16"/>
          <Border BorderThickness="1"
                  BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                  Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                  CornerRadius="4"
                  Padding="16">
            <StackPanel Spacing="16">
              <CheckBox Content="Save image to file" 
                        IsChecked="{Binding SaveImageToFile}"
                        AutomationProperties.Name="Save Image to File"/>
              <CheckBox Content="Copy image to clipboard" 
                        IsChecked="{Binding CopyImageToClipboard}"
                        AutomationProperties.Name="Copy Image to Clipboard"/>
              <CheckBox Content="Annotate image" 
                        IsChecked="{Binding AnnotateImage}"
                        AutomationProperties.Name="Annotate Image"/>
              <CheckBox Content="Upload image to host" 
                        IsChecked="{Binding UploadImageToHost}"
                        AutomationProperties.Name="Upload Image to Host"/>
            </StackPanel>
          </Border>
        </StackPanel>

        <!-- After Upload Tasks -->
        <StackPanel Spacing="8">
          <TextBlock Text="After Upload" FontWeight="SemiBold" FontSize="16"/>
          <Border BorderThickness="1"
                  BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                  Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                  CornerRadius="4"
                  Padding="16">
            <StackPanel Spacing="16">
              <CheckBox Content="Show after upload window"
                        IsChecked="{Binding ShowAfterUploadWindow}"
                        AutomationProperties.Name="Show After Upload Window"/>
              <CheckBox Content="Copy URL to clipboard" 
                        IsChecked="{Binding CopyURLToClipboard}"
                        AutomationProperties.Name="Copy URL to Clipboard"/>
              <CheckBox Content="Use URL shortener" 
                        IsChecked="{Binding UseURLShortener}"
                        AutomationProperties.Name="Use URL Shortener"/>
              <CheckBox Content="Share URL" 
                        IsChecked="{Binding ShareURL}"
                        AutomationProperties.Name="Share URL"/>
            </StackPanel>
          </Border>
        </StackPanel>
      </StackPanel>
    </ScrollViewer>

    <!-- Dialog Buttons -->
    <StackPanel Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Spacing="16">
      <Button Content="Cancel"
              Command="{Binding CancelCommand}"
              MinWidth="90"
              AutomationProperties.Name="Cancel"/>
      <Button Content="Continue"
              Command="{Binding ContinueCommand}"
              MinWidth="90"
              Classes="accent"
              AutomationProperties.Name="Continue"/>
    </StackPanel>
    
  </Grid>
</Window>
